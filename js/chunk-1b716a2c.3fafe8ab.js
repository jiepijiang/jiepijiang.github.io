(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b716a2c"],{"00dc":function(t,n,a){},"2a12":function(t,n,a){"use strict";var e=a("fa42"),s=a.n(e);s.a},"2b2e":function(t,n,a){"use strict";var e=function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"navigate-bar"},[a("span",{staticClass:"iconfont iconjiantou2",on:{click:function(n){return t.$router.back()}}}),a("strong",[t._v(t._s(t.title))]),t.showHome?a("span",{staticClass:"iconfont iconshouye",on:{click:function(n){return t.$router.push("/")}}}):a("span",{staticClass:"iconfont iconshouye",staticStyle:{opacity:"0"}})])},s=[],o={props:["title","showHome"]},i=o,c=(a("2a12"),a("2877")),r=Object(c["a"])(i,e,s,!1,null,null,null);n["a"]=r.exports},"34a6":function(t,n,a){"use strict";var e=function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"listbar"},[a("router-link",{attrs:{to:t.path||"#"}},[a("div",[t._v(t._s(t.label))]),a("div",{staticClass:"tips"},[t._v(" "+t._s(t.tips)+" "),a("span",{staticClass:"iconfont iconjiantou1"})])])],1)},s=[],o={props:["label","tips","path"]},i=o,c=(a("c58c"),a("2877")),r=Object(c["a"])(i,e,s,!1,null,"a669c5f2",null);n["a"]=r.exports},"6c2d":function(t,n,a){"use strict";var e=a("00dc"),s=a.n(e);s.a},ae02:function(t,n,a){},c58c:function(t,n,a){"use strict";var e=a("ae02"),s=a.n(e);s.a},fa42:function(t,n,a){},fb5e:function(t,n,a){"use strict";a.r(n);var e=function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"container"},[a("NavigateBar",{attrs:{title:"编辑资料"}}),a("div",{staticClass:"avatar"},[a("img",{attrs:{src:t.$axios.defaults.baseURL+t.userInfo.head_img,alt:""}}),a("van-uploader",{staticClass:"uploader",attrs:{"after-read":t.afterRead}})],1),a("Listbar",{attrs:{label:"昵称",tips:t.userInfo.nickname},nativeOn:{click:function(n){t.show=!0}}}),a("van-dialog",{attrs:{title:"修改昵称","show-cancel-button":""},on:{confirm:t.handleChangeNickname},model:{value:t.show,callback:function(n){t.show=n},expression:"show"}},[a("van-field",{attrs:{placeholder:"请输入昵称"},model:{value:t.nickname,callback:function(n){t.nickname=n},expression:"nickname"}})],1),a("Listbar",{attrs:{label:"密码",tips:"******"},nativeOn:{click:function(n){t.showpwd=!0}}}),a("van-dialog",{attrs:{title:"修改密码","show-cancel-button":""},on:{confirm:t.handleChangePassword},model:{value:t.showpwd,callback:function(n){t.showpwd=n},expression:"showpwd"}},[a("van-field",{attrs:{placeholder:"请输入新密码",type:"password"},model:{value:t.password,callback:function(n){t.password=n},expression:"password"}})],1),a("Listbar",{attrs:{label:"性别",tips:["女","男"][t.userInfo.gender]},nativeOn:{click:function(n){t.showGender=!0}}}),a("van-action-sheet",{attrs:{actions:t.actions,"close-on-click-action":""},on:{select:t.onSelect},model:{value:t.showGender,callback:function(n){t.showGender=n},expression:"showGender"}})],1)},s=[],o=a("34a6"),i=a("2b2e"),c={data:function(){return{userInfo:{},userJson:{},show:!1,showpwd:!1,showGender:!1,actions:[{name:"男",value:1},{name:"女",value:0}],nickname:"",password:"",gender:""}},components:{Listbar:o["a"],NavigateBar:i["a"]},mounted:function(){var t=this,n=JSON.parse(localStorage.getItem("userInfo"));this.userJson=n,this.$axios({url:"/user/"+n.user.id,headers:{Authorization:this.userJson.token}}).then((function(n){var a=n.data.data;t.userInfo=a,t.nickname=t.userInfo.nickname}))},methods:{afterRead:function(t){var n=this,a=new FormData;a.append("file",t.file),console.log(t),this.$axios({url:"/upload",method:"POST",headers:{Authorization:this.userJson.token},data:a}).then((function(t){console.log(t);var a=t.data.data.url;n.userInfo.head_img=a,n.handleEdit({head_img:a})}))},handleEdit:function(t){var n=this;return this.$axios({url:"/user_update/"+this.userInfo.id,method:"post",headers:{Authorization:this.userJson.token},data:t}).then((function(t){console.log(t),n.$toast.success("修改成功")}))},handleChangeNickname:function(){var t=this,n=this.handleEdit({nickname:this.nickname});n.then((function(){t.userInfo.nickname=t.nickname}))},handleChangePassword:function(){this.handleEdit({password:this.password})},onSelect:function(t){this.handleEdit({gender:t.value});this.userInfo.gender=t.value}}},r=c,l=(a("6c2d"),a("2877")),u=Object(l["a"])(r,e,s,!1,null,"7b5d3b2f",null);n["default"]=u.exports}}]);
//# sourceMappingURL=chunk-1b716a2c.3fafe8ab.js.map